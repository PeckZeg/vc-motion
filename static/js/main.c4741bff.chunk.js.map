{"version":3,"sources":["../../../../../examples/CSSMotion.less?vue&type=style&index=0&lang=less","../../../../../examples sync nonrecursive //.vue$","../../../../../examples/CSSMotionList.less?vue&type=style&index=0&lang=less","../../../../../examples/TransitionInsideDebug.less?vue&type=style&index=0&lang=less","../../../../../src/DomWrapper.tsx","../../../../../src/util/motion.ts","../../../../../src/hooks/useStepQueue.ts","../../../../../src/interface.ts","../../../../../src/hooks/useNextFrame.ts","../../../../../src/hooks/useState.ts","../../../../../src/hooks/useStatus.ts","../../../../../src/hooks/useDomMotionEvents.ts","../../../../../src/CSSMotion.tsx","../../../../../src/util/diff.ts","../../../../../src/CSSMotionList.tsx","../../../../../src/index.ts","../../../../../examples/CSSMotion.vue","webpack:///./examples/CSSMotion.vue?f87c","../../../../../examples/TransitionInsideDebug.vue","webpack:///./examples/TransitionInsideDebug.vue?e5c6","../../../../../examples/CSSMotionList.vue","webpack:///./examples/CSSMotionList.vue?a18e","../../../../../examples/CSSMotionDeadline.vue","webpack:///./examples/CSSMotionDeadline.vue?e130"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","defineComponent","name","render","this","$slots","default","makePrefixMap","styleProp","eventName","prefixes","toLowerCase","vendorPrefixes","domSupport","win","animationend","transitionend","animation","transition","getVendorPrefixes","canUseDOM","window","style","document","createElement","prefixedEventNames","getVendorPrefixedEventName","prefixMap","stylePropList","len","length","i","prototype","hasOwnProperty","call","internalAnimationEndName","internalTransitionEndName","supportTransition","animationEndName","transitionEndName","getTransitionName","transitionName","transitionType","replace","match","toUpperCase","STEP_QUEUE","isActive","step","callback","ref","setStep","next","value","nextFrameRef","cancelNextFrame","raf","cancel","onBeforeUnmount","nextFrame","delay","nextFrameId","isCanceled","useNextFrame","watch","index","indexOf","nextStep","result","info","doNext","Promise","then","useMountStatus","defaultValue","destroyRef","val","useStatus","supportMotion","visible","getElement","props","useState","asyncVisible","setAsyncVisible","status","setStatus","setStyle","mountedRef","deadlineRef","getDomElement","activeRef","onInternalMotionEnd","event","element","deadline","target","canEnd","onAppearEnd","onEnterEnd","onLeaveEnd","cacheElementRef","callbackRef","computed","removeMotionEvents","removeEventListener","addEventListener","useDomMotionEvents","patchMotionEvents","eventHandlers","onAppearPrepare","onAppearStart","onAppearActive","onEnterPrepare","onEnterStart","onEnterActive","onLeavePrepare","onLeaveStart","onLeaveActive","useStepQueue","newStep","onPrepare","motionDeadline","clearTimeout","setTimeout","startStep","immediate","nextStatus","isMounted","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","nextTick","toRef","undefined","onVisibleChanged","getCSSMotionPropTypes","motionName","oneOfType","string","shape","appear","enter","leave","appearActive","enterActive","leaveActive","loose","bool","def","number","forceRender","removeOnLeave","leavedClass","eventProps","object","func","genCSSMotion","transitionSupport","isSupportTransition","setup","nodeRef","wrapperNodeRef","findDOMNode","err","statusStep","statusStyle","mergedVisible","setNodeRef","node","motionChildren","children","$props","statusSuffix","class","display","wrapKeyToObject","key","keyObj","String","parseKeys","diffKeys","prevKeys","currentKeys","list","currentIndex","currentLen","prevKeyObjects","currentKeyObjects","forEach","hit","currentKeyObj","concat","slice","obj","push","duplicatedKeys","filter","matchKey","genCSSMotionList","CSSMotion","OriginCSSMotion","mixins","DerivedStateFromPropsMixin","arrayOf","vueKeyType","isRequired","component","oneOf","data","state","keyEntities","getDerivedStateFromProps","parsedKeyObjects","entity","prevEntity","find","methods","removeKey","motionProps","Component","Fragment","$attrs","changedVisible","Div","console","log","components","show","hasMotionClass","prepare","onTrigger","onCollapse","height","skipColorTransition","_","propertyName","styleGreen","background","forceDelay","onMotionLeaveImmediately","type","checked","force-render","motion-name","remove-on-leave","leaved-class","motion-leave-immediately","setVisible","maxHeight","CSSMotionList","count","checkedMap","keyList","mounted","onFlushMotion","onCountChange","Number","width","margin","onChange","onStart","ele","onEnd","motion-deadline"],"mappings":"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","file":"static/js/main.c4741bff.chunk.js","sourcesContent":["export { default } from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--2-0!../node_modules/css-loader/dist/cjs.js??ref--2-1!../node_modules/vue-loader/dist/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??ref--2-2!../node_modules/resolve-url-loader/index.js??ref--2-3!../node_modules/less-loader/dist/cjs.js??ref--2-4!./CSSMotion.less?vue&type=style&index=0&lang=less\"; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--2-0!../node_modules/css-loader/dist/cjs.js??ref--2-1!../node_modules/vue-loader/dist/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??ref--2-2!../node_modules/resolve-url-loader/index.js??ref--2-3!../node_modules/less-loader/dist/cjs.js??ref--2-4!./CSSMotion.less?vue&type=style&index=0&lang=less\"","var map = {\n\t\"./CSSMotion.vue\": 64,\n\t\"./CSSMotionDeadline.vue\": 67,\n\t\"./CSSMotionList.vue\": 66,\n\t\"./TransitionInsideDebug.vue\": 65\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 54;","export { default } from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--2-0!../node_modules/css-loader/dist/cjs.js??ref--2-1!../node_modules/vue-loader/dist/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??ref--2-2!../node_modules/resolve-url-loader/index.js??ref--2-3!../node_modules/less-loader/dist/cjs.js??ref--2-4!./CSSMotionList.less?vue&type=style&index=0&lang=less\"; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--2-0!../node_modules/css-loader/dist/cjs.js??ref--2-1!../node_modules/vue-loader/dist/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??ref--2-2!../node_modules/resolve-url-loader/index.js??ref--2-3!../node_modules/less-loader/dist/cjs.js??ref--2-4!./CSSMotionList.less?vue&type=style&index=0&lang=less\"","export { default } from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--2-0!../node_modules/css-loader/dist/cjs.js??ref--2-1!../node_modules/vue-loader/dist/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??ref--2-2!../node_modules/resolve-url-loader/index.js??ref--2-3!../node_modules/less-loader/dist/cjs.js??ref--2-4!./TransitionInsideDebug.less?vue&type=style&index=0&lang=less\"; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--2-0!../node_modules/css-loader/dist/cjs.js??ref--2-1!../node_modules/vue-loader/dist/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??ref--2-2!../node_modules/resolve-url-loader/index.js??ref--2-3!../node_modules/less-loader/dist/cjs.js??ref--2-4!./TransitionInsideDebug.less?vue&type=style&index=0&lang=less\"","import { defineComponent } from 'vue';\n\nexport default defineComponent({\n  name: 'DomWrapper',\n\n  render() {\n    return this.$slots.default();\n  }\n});\n","import { MotionName } from '../CSSMotion';\nimport canUseDOM from '@ayase/vc-util/lib/Dom/canUseDom';\n\n// ================= Transition =================\n// Event wrapper. Copy from react source code\nfunction makePrefixMap(styleProp: string, eventName: string) {\n  const prefixes: Record<string, string> = {};\n\n  prefixes[styleProp.toLowerCase()] = eventName.toLowerCase();\n  prefixes[`Webkit${styleProp}`] = `webkit${eventName}`;\n  prefixes[`Moz${styleProp}`] = `moz${eventName}`;\n  prefixes[`ms${styleProp}`] = `MS${eventName}`;\n  prefixes[`O${styleProp}`] = `o${eventName.toLowerCase()}`;\n\n  return prefixes;\n}\n\nexport function getVendorPrefixes(domSupport: boolean, win: object) {\n  const prefixes: {\n    animationend: Record<string, string>;\n    transitionend: Record<string, string>;\n  } = {\n    animationend: makePrefixMap('Animation', 'AnimationEnd'),\n    transitionend: makePrefixMap('Transition', 'TransitionEnd')\n  };\n\n  if (domSupport) {\n    if (!('AnimationEvent' in win)) {\n      delete prefixes.animationend.animation;\n    }\n\n    if (!('TransitionEvent' in win)) {\n      delete prefixes.transitionend.transition;\n    }\n  }\n\n  return prefixes;\n}\n\nconst vendorPrefixes = getVendorPrefixes(\n  canUseDOM(),\n  typeof window !== 'undefined' ? window : {}\n);\n\nlet style = {};\n\nif (canUseDOM()) {\n  ({ style } = document.createElement('div'));\n}\n\nconst prefixedEventNames = {};\n\nexport function getVendorPrefixedEventName(eventName: string) {\n  if (prefixedEventNames[eventName]) {\n    return prefixedEventNames[eventName];\n  }\n\n  const prefixMap = vendorPrefixes[eventName];\n\n  if (prefixMap) {\n    const stylePropList = Object.keys(prefixMap);\n    const len = stylePropList.length;\n    for (let i = 0; i < len; i += 1) {\n      const styleProp = stylePropList[i];\n      if (\n        Object.prototype.hasOwnProperty.call(prefixMap, styleProp) &&\n        styleProp in style\n      ) {\n        prefixedEventNames[eventName] = prefixMap[styleProp];\n        return prefixedEventNames[eventName];\n      }\n    }\n  }\n\n  return '';\n}\n\nconst internalAnimationEndName = getVendorPrefixedEventName('animationend');\nconst internalTransitionEndName = getVendorPrefixedEventName('transitionend');\nexport const supportTransition = !!(\n  internalAnimationEndName && internalTransitionEndName\n);\n\nexport const animationEndName = internalAnimationEndName || 'animationend';\nexport const transitionEndName = internalTransitionEndName || 'transitionend';\n\nexport function getTransitionName(\n  transitionName: MotionName,\n  transitionType: string\n) {\n  if (!transitionName) return null;\n\n  if (typeof transitionName === 'object') {\n    const type = transitionType.replace(/-\\w/g, (match) =>\n      match[1].toUpperCase()\n    );\n    return transitionName[type];\n  }\n\n  return `${transitionName}-${transitionType}`;\n}\n","import { Ref, onBeforeUnmount, watch, ref } from 'vue';\nimport useNextFrame from './useNextFrame';\n\nimport {\n  StepStatus,\n  STEP_PREPARE,\n  STEP_ACTIVE,\n  STEP_START,\n  STEP_ACTIVATED,\n  STEP_NONE\n} from '../interface';\n\nconst STEP_QUEUE: StepStatus[] = [\n  STEP_PREPARE,\n  STEP_START,\n  STEP_ACTIVE,\n  STEP_ACTIVATED\n];\n\n/** Skip current step */\nexport const SkipStep = false as const;\n/** Current step should be update in */\nexport const DoStep = true as const;\n\nexport function isActive(step: StepStatus) {\n  return step === STEP_ACTIVE || step === STEP_ACTIVATED;\n}\n\nexport default (\n  callback: (\n    step: StepStatus\n  ) => Promise<void> | void | typeof SkipStep | typeof DoStep\n): [() => void, Ref<StepStatus>] => {\n  const step = ref<StepStatus>(STEP_NONE);\n\n  function setStep(next: StepStatus) {\n    step.value = next;\n  }\n\n  const [nextFrame, cancelNextFrame] = useNextFrame();\n\n  function startQueue() {\n    setStep(STEP_PREPARE);\n  }\n\n  watch(step, (step) => {\n    if (step !== STEP_NONE && step !== STEP_ACTIVATED) {\n      const index = STEP_QUEUE.indexOf(step);\n      const nextStep = STEP_QUEUE[index + 1];\n\n      const result = callback(step);\n\n      if (result === SkipStep) {\n        // Skip when no needed\n        setStep(nextStep);\n      } else {\n        // Do as frame for step update\n        nextFrame((info) => {\n          function doNext() {\n            // Skip since current queue is ood\n            if (info.isCanceled()) return;\n\n            setStep(nextStep);\n          }\n\n          if (result === true) {\n            doNext();\n          } else {\n            // Only promise should be async\n            Promise.resolve(result).then(doNext);\n          }\n        });\n      }\n    }\n  });\n\n  onBeforeUnmount(() => {\n    cancelNextFrame();\n  });\n\n  return [startQueue, step];\n};\n","import { CSSProperties } from 'vue';\n\nexport const STATUS_NONE = 'none' as const;\nexport const STATUS_APPEAR = 'appear' as const;\nexport const STATUS_ENTER = 'enter' as const;\nexport const STATUS_LEAVE = 'leave' as const;\n\nexport type MotionStatus =\n  | typeof STATUS_NONE\n  | typeof STATUS_APPEAR\n  | typeof STATUS_ENTER\n  | typeof STATUS_LEAVE;\n\nexport const STEP_NONE = 'none' as const;\nexport const STEP_PREPARE = 'prepare' as const;\nexport const STEP_START = 'start' as const;\nexport const STEP_ACTIVE = 'active' as const;\nexport const STEP_ACTIVATED = 'end' as const;\n\nexport type StepStatus =\n  | typeof STEP_NONE\n  | typeof STEP_PREPARE\n  | typeof STEP_START\n  | typeof STEP_ACTIVE\n  | typeof STEP_ACTIVATED;\n\nexport type MotionEvent = (TransitionEvent | AnimationEvent) & {\n  deadline?: boolean;\n};\n\nexport type MotionPrepareEventHandler = (\n  element: HTMLElement\n) => Promise<any> | void;\n\nexport type MotionEventHandler = (\n  element: HTMLElement,\n  event: MotionEvent\n) => CSSProperties | void;\n\nexport type MotionEndEventHandler = (\n  element: HTMLElement,\n  event: MotionEvent\n) => boolean | void;\n","import { onBeforeUnmount, ref } from 'vue';\nimport raf from '@ayase/vc-util/lib/raf';\n\nexport default (): [\n  (callback: (info: { isCanceled: () => boolean }) => void) => void,\n  () => void\n] => {\n  const nextFrameRef = ref<number>(null);\n\n  function cancelNextFrame() {\n    raf.cancel(nextFrameRef.value);\n  }\n\n  function nextFrame(\n    callback: (info: { isCanceled: () => boolean }) => void,\n    delay = 2\n  ) {\n    cancelNextFrame();\n\n    const nextFrameId = raf(() => {\n      if (delay <= 1) {\n        callback({ isCanceled: () => nextFrameId !== nextFrameRef.value });\n      } else {\n        nextFrame(callback, delay - 1);\n      }\n    });\n\n    nextFrameRef.value = nextFrameId;\n  }\n\n  onBeforeUnmount(() => {\n    cancelNextFrame();\n  });\n\n  return [nextFrame, cancelNextFrame];\n};\n","import { UnwrapRef, Ref, onBeforeUnmount, ref } from 'vue';\n\nexport default function useMountStatus<T>(\n  defaultValue?: T\n): [Ref<UnwrapRef<T>>, (next: T) => void] {\n  const destroyRef = ref(false);\n  const val = ref(defaultValue);\n\n  function setValue(next: T) {\n    if (!destroyRef.value) {\n      val.value = next as UnwrapRef<T>;\n    }\n  }\n\n  onBeforeUnmount(() => {\n    destroyRef.value = true;\n  });\n\n  return [val, setValue];\n}\n","import { CSSMotionProps } from '../CSSMotion';\nimport { CSSProperties, Ref } from 'vue';\n\nimport { onBeforeUnmount, nextTick, computed, watch, toRef, ref } from 'vue';\nimport useStepQueue, { DoStep, SkipStep, isActive } from './useStepQueue';\nimport useDomMotionEvents from './useDomMotionEvents';\nimport useState from './useState';\n\nimport {\n  STATUS_APPEAR,\n  STATUS_LEAVE,\n  STATUS_ENTER,\n  STEP_PREPARE,\n  STEP_ACTIVE,\n  STATUS_NONE,\n  STEP_START,\n  MotionPrepareEventHandler,\n  MotionEventHandler,\n  MotionStatus,\n  MotionEvent,\n  StepStatus\n} from '../interface';\n\nexport default function useStatus(\n  supportMotion: boolean,\n  visible: Ref<boolean>,\n  getElement: () => HTMLElement,\n  props: CSSMotionProps\n): [Ref<MotionStatus>, Ref<StepStatus>, Ref<CSSProperties>, Ref<boolean>] {\n  // Used for outer render usage to avoid `visible: false & status: none` to render nothing\n  const [asyncVisible, setAsyncVisible] = useState<boolean>();\n  const [status, setStatus] = useState<MotionStatus>(STATUS_NONE);\n  const [style, setStyle] = useState<CSSProperties | undefined>(null);\n\n  const mountedRef = ref(false);\n  const deadlineRef = ref(null);\n\n  // =========================== Dom Node ===========================\n  function getDomElement() {\n    return getElement();\n  }\n\n  // ========================== Motion End ==========================\n  const activeRef = ref(false);\n\n  function onInternalMotionEnd(event: MotionEvent) {\n    const element = getDomElement();\n\n    if (event && !event.deadline && event.target !== element) {\n      // event exists\n      // not initiated by deadline\n      // transitionEnd not fired by inner elements\n      return;\n    }\n\n    let canEnd: boolean | void;\n\n    if (status.value === STATUS_APPEAR && activeRef.value) {\n      canEnd = props.onAppearEnd?.(element, event);\n    } else if (status.value === STATUS_ENTER && activeRef.value) {\n      canEnd = props.onEnterEnd?.(element, event);\n    } else if (status.value === STATUS_LEAVE && activeRef.value) {\n      canEnd = props.onLeaveEnd?.(element, event);\n    }\n\n    if (canEnd !== false) {\n      setStatus(STATUS_NONE);\n      setStyle(null);\n    }\n  }\n\n  const [patchMotionEvents] = useDomMotionEvents(onInternalMotionEnd);\n\n  // ============================= Step =============================\n  const eventHandlers = computed<{\n    [STEP_PREPARE]?: MotionPrepareEventHandler;\n    [STEP_START]?: MotionEventHandler;\n    [STEP_ACTIVE]?: MotionEventHandler;\n  }>(() => {\n    switch (status.value) {\n      case 'appear':\n        return {\n          [STEP_PREPARE]: props.onAppearPrepare,\n          [STEP_START]: props.onAppearStart,\n          [STEP_ACTIVE]: props.onAppearActive\n        };\n\n      case 'enter':\n        return {\n          [STEP_PREPARE]: props.onEnterPrepare,\n          [STEP_START]: props.onEnterStart,\n          [STEP_ACTIVE]: props.onEnterActive\n        };\n\n      case 'leave':\n        return {\n          [STEP_PREPARE]: props.onLeavePrepare,\n          [STEP_START]: props.onLeaveStart,\n          [STEP_ACTIVE]: props.onLeaveActive\n        };\n\n      default:\n        return {};\n    }\n  });\n\n  const [startStep, step] = useStepQueue((newStep) => {\n    // Only prepare step can be skip\n    if (newStep === STEP_PREPARE) {\n      const onPrepare = eventHandlers[STEP_PREPARE];\n      if (!onPrepare) {\n        return SkipStep;\n      }\n\n      return onPrepare(getDomElement());\n    }\n\n    // Rest step is sync update\n    if (step.value in eventHandlers.value) {\n      setStyle(\n        eventHandlers.value[step.value]?.(getDomElement(), null) || null\n      );\n    }\n\n    if (step.value === STEP_ACTIVE) {\n      // Patch events when motion needed\n      patchMotionEvents(getDomElement());\n\n      if (props.motionDeadline > 0) {\n        clearTimeout(deadlineRef.value);\n\n        deadlineRef.value = setTimeout(() => {\n          onInternalMotionEnd({\n            deadline: true\n          } as MotionEvent);\n        }, props.motionDeadline);\n      }\n    }\n\n    return DoStep;\n  });\n\n  watch(\n    step,\n    (step) => {\n      activeRef.value = isActive(step);\n    },\n    { immediate: true }\n  );\n\n  // ============================ Status ============================\n  // Update with new status\n  watch(\n    visible,\n    (visible) => {\n      setAsyncVisible(visible);\n\n      if (!supportMotion) {\n        return;\n      }\n\n      const isMounted = mountedRef.value;\n      mountedRef.value = true;\n\n      let nextStatus: MotionStatus;\n\n      // Appear\n      if (!isMounted && visible && props.motionAppear) {\n        nextStatus = STATUS_APPEAR;\n      }\n\n      // Enter\n      if (isMounted && visible && props.motionEnter) {\n        nextStatus = STATUS_ENTER;\n      }\n\n      // Leave\n      if (\n        (isMounted && !visible && props.motionLeave) ||\n        (!isMounted &&\n          props.motionLeaveImmediately &&\n          !visible &&\n          props.motionLeave)\n      ) {\n        nextStatus = STATUS_LEAVE;\n      }\n\n      // Update to next status\n      if (nextStatus) {\n        setStatus(nextStatus);\n        nextTick(startStep);\n      }\n    },\n    { immediate: true }\n  );\n\n  // ============================ Effect ============================\n  // Reset when motion changed\n  watch(\n    [\n      toRef(props, 'motionAppear'),\n      toRef(props, 'motionEnter'),\n      toRef(props, 'motionLeave')\n    ] as const,\n    ([motionAppear, motionEnter, motionLeave]) => {\n      if (\n        // Cancel appear\n        (status.value === STATUS_APPEAR && !motionAppear) ||\n        // Cancel enter\n        (status.value === STATUS_ENTER && !motionEnter) ||\n        // Cancel leave\n        (status.value === STATUS_LEAVE && !motionLeave)\n      ) {\n        setStatus(STATUS_NONE);\n      }\n    },\n    {\n      immediate: true\n    }\n  );\n\n  onBeforeUnmount(() => {\n    clearTimeout(deadlineRef.value);\n  });\n\n  // Trigger `onVisibleChanged`\n  watch(\n    [asyncVisible, status] as const,\n    ([asyncVisible, status]) => {\n      if (asyncVisible !== undefined && status === STATUS_NONE) {\n        props.onVisibleChanged?.(asyncVisible);\n      }\n    },\n    { immediate: true }\n  );\n\n  // ============================ Styles ============================\n  if (eventHandlers.value[STEP_PREPARE] && step.value === STEP_START) {\n    style.value = { transition: 'none', ...style.value };\n  }\n\n  return [status, step, style, asyncVisible ?? visible];\n}\n","import { animationEndName, transitionEndName } from '../util/motion';\nimport { onBeforeUnmount, computed, ref } from 'vue';\nimport { MotionEvent } from '../interface';\n\nexport default (\n  callback: (event: MotionEvent) => void\n): [(element: HTMLElement) => void, (element: HTMLElement) => void] => {\n  const cacheElementRef = ref<HTMLElement>();\n\n  // Cache callback\n  const callbackRef = ref(callback);\n\n  // Internal motion event handler\n  const onInternalMotionEnd = computed(() => callbackRef.value);\n\n  // Remove events\n  function removeMotionEvents(element: HTMLElement) {\n    if (element) {\n      element.removeEventListener(transitionEndName, onInternalMotionEnd.value);\n      element.removeEventListener(animationEndName, onInternalMotionEnd.value);\n    }\n  }\n\n  // Patch events\n  function patchMotionEvents(element: HTMLElement) {\n    if (cacheElementRef.value && cacheElementRef.value !== element) {\n      removeMotionEvents(element);\n    }\n\n    if (element && element !== cacheElementRef.value) {\n      element.addEventListener(transitionEndName, onInternalMotionEnd.value);\n      element.addEventListener(animationEndName, onInternalMotionEnd.value);\n\n      // Save as cache in case dom removed trigger by `motionDeadline`\n      cacheElementRef.value = element;\n    }\n  }\n\n  // Clean up when removed\n  onBeforeUnmount(() => {\n    removeMotionEvents(cacheElementRef.value);\n  });\n\n  return [patchMotionEvents, removeMotionEvents];\n};\n","import { ShallowUnwrapRef, CSSProperties, VNode, Ref } from 'vue';\nimport { ClassList } from '@ayase/vc-util/lib/types';\nimport DomWrapper from './DomWrapper';\n\nimport {\n  STEP_PREPARE,\n  STEP_START,\n  STATUS_NONE,\n  MotionPrepareEventHandler,\n  MotionEndEventHandler,\n  MotionEventHandler,\n  MotionStatus,\n  StepStatus\n} from './interface';\n\nimport { getTransitionName, supportTransition } from './util/motion';\nimport findDOMNode from '@ayase/vc-util/lib/Dom/findDOMNode';\nimport { defineComponent, toRef, ref } from 'vue';\nimport { isActive } from './hooks/useStepQueue';\nimport useStatus from './hooks/useStatus';\n\nimport {\n  oneOfType,\n  number,\n  object,\n  string,\n  shape,\n  bool,\n  func\n} from 'vue-types';\n\nexport type MotionName =\n  | string\n  | {\n      appear?: string;\n      enter?: string;\n      leave?: string;\n      appearActive?: string;\n      enterActive?: string;\n      leaveActive?: string;\n    };\n\nexport interface CSSMotionProps {\n  motionName?: MotionName;\n  visible?: boolean;\n  motionAppear?: boolean;\n  motionEnter?: boolean;\n  motionLeave?: boolean;\n  motionLeaveImmediately?: boolean;\n  motionDeadline?: number;\n  /**\n   * Create element in view even the element is invisible.\n   * Will patch `display: none` style on it.\n   */\n  forceRender?: boolean;\n  /**\n   * Remove element when motion end. This will not work when `forceRender` is set.\n   */\n  removeOnLeave?: boolean;\n  leavedClass?: ClassList;\n  /** @private Used by CSSMotionList. Do not use in your production. */\n  eventProps?: object;\n\n  // Prepare groups\n  onAppearPrepare?: MotionPrepareEventHandler;\n  onEnterPrepare?: MotionPrepareEventHandler;\n  onLeavePrepare?: MotionPrepareEventHandler;\n\n  // Normal motion groups\n  onAppearStart?: MotionEventHandler;\n  onEnterStart?: MotionEventHandler;\n  onLeaveStart?: MotionEventHandler;\n\n  onAppearActive?: MotionEventHandler;\n  onEnterActive?: MotionEventHandler;\n  onLeaveActive?: MotionEventHandler;\n\n  onAppearEnd?: MotionEndEventHandler;\n  onEnterEnd?: MotionEndEventHandler;\n  onLeaveEnd?: MotionEndEventHandler;\n\n  // Special\n  /** This will always trigger after final visible changed. Even if no motion configured. */\n  onVisibleChanged?: (visible: boolean) => void;\n\n  internalRef?: Ref<any>;\n}\n\nexport interface CSSMotionRawBindings {\n  status: Ref<MotionStatus>;\n  mergedVisible: Ref<boolean>;\n  setNodeRef: (node: any) => void;\n  statusStep: Ref<StepStatus>;\n  statusStyle: Ref<CSSProperties>;\n}\n\nexport const getCSSMotionPropTypes = () => ({\n  motionName: oneOfType([\n    string(),\n    shape({\n      appear: string(),\n      enter: string(),\n      leave: string(),\n      appearActive: string(),\n      enterActive: string(),\n      leaveActive: string()\n    }).loose\n  ]),\n\n  visible: bool().def(true),\n  motionAppear: bool().def(true),\n  motionEnter: bool().def(true),\n  motionLeave: bool().def(true),\n  motionLeaveImmediately: bool(),\n  motionDeadline: number(),\n  forceRender: bool(),\n  removeOnLeave: bool().def(true),\n  leavedClass: string(),\n  eventProps: object(),\n\n  onAppearPrepare: func(),\n  onEnterPrepare: func(),\n  onLeavePrepare: func(),\n\n  onAppearStart: func(),\n  onEnterStart: func(),\n  onLeaveStart: func(),\n\n  onAppearActive: func(),\n  onEnterActive: func(),\n  onLeaveActive: func(),\n\n  onAppearEnd: func(),\n  onEnterEnd: func(),\n  onLeaveEnd: func(),\n\n  onVisibleChanged: func()\n});\n\n/**\n * `transitionSupport` is used for none transition test case.\n * Default we use browser transition event support check.\n */\nexport function genCSSMotion(transitionSupport?: boolean) {\n  function isSupportTransition(props: CSSMotionProps) {\n    return !!(props.motionName && transitionSupport);\n  }\n\n  return defineComponent<CSSMotionProps, CSSMotionRawBindings>({\n    name: 'CSSMotion',\n\n    props: getCSSMotionPropTypes() as undefined,\n\n    setup(props) {\n      const supportMotion = isSupportTransition(props);\n\n      // Ref to the react node, it may be a HTMLElement\n      const nodeRef = ref();\n\n      // Ref to the dom wrapper in case ref can not pass to HTMLElement\n      const wrapperNodeRef = ref();\n\n      function getDomElement() {\n        try {\n          return findDOMNode<HTMLElement>(\n            nodeRef.value || wrapperNodeRef.value\n          );\n        } catch (err) {\n          // Only happen when `motionDeadline` trigger but element removed.\n          return null;\n        }\n      }\n\n      const [status, statusStep, statusStyle, mergedVisible] = useStatus(\n        supportMotion,\n        toRef(props, 'visible'),\n        getDomElement,\n        props\n      );\n\n      // ====================== Refs ======================\n      const setNodeRef = (node: any) => {\n        nodeRef.value = node;\n      };\n\n      return {\n        status,\n        mergedVisible,\n        setNodeRef,\n        statusStep,\n        statusStyle\n      };\n    },\n\n    // ===================== Render =====================\n    render() {\n      const children = this.$slots.default;\n      let motionChildren: VNode;\n\n      const props: CSSMotionProps = this.$props;\n      const {\n        eventProps,\n        removeOnLeave,\n        leavedClass,\n        forceRender,\n        motionName\n      } = props;\n      const {\n        mergedVisible,\n        status,\n        setNodeRef,\n        statusStep,\n        statusStyle\n      }: ShallowUnwrapRef<CSSMotionRawBindings> = this;\n\n      if (!children) {\n        // No children\n        motionChildren = null;\n      } else if (status === STATUS_NONE || !isSupportTransition(props)) {\n        // Stable children\n        if (mergedVisible) {\n          motionChildren = children({ ...eventProps, ref: setNodeRef });\n        } else if (!removeOnLeave) {\n          motionChildren = children({\n            ...eventProps,\n            class: leavedClass,\n            ref: setNodeRef\n          });\n        } else if (forceRender) {\n          motionChildren = children({\n            ...eventProps,\n            style: { display: 'none' },\n            ref: setNodeRef\n          });\n        } else {\n          motionChildren = null;\n        }\n      } else {\n        // In motion\n        let statusSuffix: string;\n        if (statusStep === STEP_PREPARE) {\n          statusSuffix = 'prepare';\n        } else if (isActive(statusStep)) {\n          statusSuffix = 'active';\n        } else if (statusStep === STEP_START) {\n          statusSuffix = 'start';\n        }\n\n        motionChildren = children({\n          ...eventProps,\n\n          class: [\n            getTransitionName(motionName, status),\n            {\n              [getTransitionName(\n                motionName,\n                `${status}-${statusSuffix}`\n              )]: statusSuffix,\n              [motionName as string]: typeof motionName === 'string'\n            }\n          ],\n\n          style: statusStyle,\n\n          ref: setNodeRef\n        });\n      }\n\n      return <DomWrapper ref=\"wrapperNodeRef\">{motionChildren}</DomWrapper>;\n    }\n  });\n}\n\nexport default genCSSMotion(supportTransition);\n","import { VueKey } from '@ayase/vc-util/lib/types';\n\nexport const STATUS_ADD = 'add' as const;\nexport const STATUS_KEEP = 'keep' as const;\nexport const STATUS_REMOVE = 'remove' as const;\nexport const STATUS_REMOVED = 'removed' as const;\n\nexport type DiffStatus =\n  | typeof STATUS_ADD\n  | typeof STATUS_KEEP\n  | typeof STATUS_REMOVE\n  | typeof STATUS_REMOVED;\n\nexport interface KeyObject {\n  key: VueKey;\n  status?: DiffStatus;\n}\n\nexport function wrapKeyToObject(key: VueKey) {\n  let keyObj: KeyObject;\n\n  if (key && typeof key === 'object' && 'key' in key) {\n    keyObj = key;\n  } else {\n    keyObj = { key };\n  }\n  return {\n    ...keyObj,\n    key: String(keyObj.key)\n  };\n}\n\nexport function parseKeys(keys = []) {\n  return keys.map(wrapKeyToObject);\n}\n\nexport function diffKeys(\n  prevKeys: KeyObject[] = [],\n  currentKeys: KeyObject[] = []\n) {\n  let list: KeyObject[] = [];\n  let currentIndex = 0;\n  const currentLen = currentKeys.length;\n\n  const prevKeyObjects = parseKeys(prevKeys);\n  const currentKeyObjects = parseKeys(currentKeys);\n\n  // Check prev keys to insert or keep\n  prevKeyObjects.forEach((keyObj) => {\n    let hit = false;\n\n    for (let i = currentIndex; i < currentLen; i += 1) {\n      const currentKeyObj = currentKeyObjects[i];\n\n      if (currentKeyObj.key === keyObj.key) {\n        // New added keys should add before current key\n        if (currentIndex < i) {\n          list = list.concat(\n            currentKeyObjects\n              .slice(currentIndex, i)\n              .map((obj) => ({ ...obj, status: STATUS_ADD }))\n          );\n\n          currentIndex = i;\n        }\n\n        list.push({\n          ...currentKeyObj,\n          status: STATUS_KEEP\n        });\n\n        currentIndex += 1;\n\n        hit = true;\n        break;\n      }\n    }\n\n    // If not hit, it means key is removed\n    if (!hit) {\n      list.push({\n        ...keyObj,\n        status: STATUS_REMOVE\n      });\n    }\n  });\n\n  // Add rest to the list\n  if (currentIndex < currentLen) {\n    list = list.concat(\n      currentKeyObjects\n        .slice(currentIndex)\n        .map((obj) => ({ ...obj, status: STATUS_ADD }))\n    );\n  }\n\n  /**\n   * Merge same key when it remove and add again:\n   *    [1 - add, 2 - keep, 1 - remove] -> [1 - keep, 2 - keep]\n   */\n  const keys = {};\n\n  list.forEach(({ key }) => {\n    keys[key] = (keys[key] || 0) + 1;\n  });\n\n  const duplicatedKeys = Object.keys(keys).filter((key) => keys[key] > 1);\n\n  duplicatedKeys.forEach((matchKey) => {\n    // Remove `STATUS_REMOVE` node.\n    list = list.filter(\n      ({ key, status }) => key !== matchKey || status !== STATUS_REMOVE\n    );\n\n    // Update `STATUS_ADD` to `STATUS_KEEP`\n    list.forEach((node) => {\n      if (node.key === matchKey) {\n        // eslint-disable-next-line no-param-reassign\n        node.status = STATUS_KEEP;\n      }\n    });\n  });\n\n  return list;\n}\n","import { DerivedStateFromPropsMixin } from '@ayase/vc-util/lib/mixins';\nimport { VueKey } from '@ayase/vc-util/lib/types';\nimport { Fragment, defineComponent } from 'vue';\n\nimport OriginCSSMotion, {\n  CSSMotionProps,\n  getCSSMotionPropTypes\n} from './CSSMotion';\n\nimport {\n  STATUS_REMOVED,\n  STATUS_REMOVE,\n  STATUS_KEEP,\n  STATUS_ADD,\n  parseKeys,\n  KeyObject,\n  diffKeys\n} from './util/diff';\n\nimport { arrayOf, object, oneOf, oneOfType, shape, string } from 'vue-types';\nimport { vueKeyType } from '@ayase/vc-util/lib/vueTypes';\nimport { supportTransition } from './util/motion';\n\nexport interface CSSMotionListProps\n  extends Omit<CSSMotionProps, 'onVisibleChanged'> {\n  keys: (VueKey | { key: VueKey; [name: string]: any })[];\n  component?: string | object | false;\n\n  /** This will always trigger after final visible changed. Even if no motion configured. */\n  onVisibleChanged?: (visible: boolean, info: { key: VueKey }) => void;\n}\n\nexport interface CSSMotionListState {\n  keyEntities: KeyObject[];\n}\n\n/**\n * Generate a CSSMotionList component with config\n * @param transitionSupport No need since CSSMotionList no longer depends on transition support\n * @param CSSMotion CSSMotion component\n */\nexport function genCSSMotionList(\n  transitionSupport: boolean,\n  CSSMotion = OriginCSSMotion\n) {\n  return defineComponent<CSSMotionListProps, {}, { state: CSSMotionListState }>(\n    {\n      name: 'CSSMotionList',\n      mixins: [DerivedStateFromPropsMixin],\n\n      props: {\n        ...getCSSMotionPropTypes(),\n\n        keys: arrayOf(\n          oneOfType([\n            vueKeyType(),\n            shape({ key: vueKeyType().isRequired }).loose\n          ])\n        ),\n\n        component: oneOfType([string(), object(), oneOf([false])]).def('div')\n      } as undefined,\n\n      data() {\n        return {\n          state: {\n            keyEntities: []\n          }\n        };\n      },\n\n      getDerivedStateFromProps(\n        { keys }: CSSMotionListProps,\n        { keyEntities }: CSSMotionListState\n      ) {\n        const parsedKeyObjects = parseKeys(keys);\n        const mixedKeyEntities = diffKeys(keyEntities, parsedKeyObjects);\n\n        return {\n          keyEntities: mixedKeyEntities.filter((entity) => {\n            const prevEntity = keyEntities.find(\n              ({ key }) => entity.key === key\n            );\n\n            // Remove if already mark as removed\n            return !(\n              prevEntity &&\n              prevEntity.status === STATUS_REMOVED &&\n              entity.status === STATUS_REMOVE\n            );\n          })\n        };\n      },\n\n      methods: {\n        removeKey(removeKey: VueKey) {\n          this.state.keyEntities = this.state.keyEntities.map((entity) => {\n            if (entity.key !== removeKey) return entity;\n\n            return {\n              ...entity,\n              status: STATUS_REMOVED\n            };\n          });\n        }\n      },\n\n      render() {\n        const {\n          keys,\n          component,\n          onVisibleChanged,\n          ...motionProps\n        }: CSSMotionListProps = this.$props;\n\n        const Component = component || Fragment;\n        const { keyEntities }: CSSMotionListState = this.state;\n\n        return (\n          // @ts-ignore\n          <Component {...{ ...this.$attrs }}>\n            {keyEntities.map(({ status, ...eventProps }) => {\n              const visible = status === STATUS_ADD || status === STATUS_KEEP;\n\n              return (\n                <CSSMotion\n                  {...motionProps}\n                  key={eventProps.key}\n                  visible={visible}\n                  eventProps={eventProps}\n                  onVisibleChanged={(changedVisible) => {\n                    onVisibleChanged?.(changedVisible, { key: eventProps.key });\n\n                    if (!changedVisible) {\n                      this.removeKey(eventProps.key);\n                    }\n                  }}\n                  v-slots={this.$slots}\n                />\n              );\n            })}\n          </Component>\n        );\n      }\n    }\n  );\n}\n\nexport default genCSSMotionList(supportTransition);\n","import CSSMotionList from './CSSMotionList';\nimport CSSMotion from './CSSMotion';\n\nexport type { MotionEventHandler, MotionEndEventHandler } from './interface';\nexport type { CSSMotionListProps } from './CSSMotionList';\nexport type { CSSMotionProps } from './CSSMotion';\n\nexport { CSSMotionList };\nexport default CSSMotion;\n","<template>\n  <label>\n    <input type=\"checkbox\" :checked=\"state.show\" @change=\"onTrigger\" />\n    Show Component\n  </label>\n\n  <label>\n    <input v-model=\"state.hasMotionClass\" type=\"checkbox\" />\n    hasMotionClass\n  </label>\n\n  <label>\n    <input v-model=\"state.forceRender\" type=\"checkbox\" />\n    forceRender\n  </label>\n\n  <label>\n    <input v-model=\"state.removeOnLeave\" type=\"checkbox\" />\n    removeOnLeave {{ state.removeOnLeave ? '' : ' (use leavedClassName)' }}\n  </label>\n\n  <label>\n    <input v-model=\"state.prepare\" type=\"checkbox\" />\n    prepare before motion\n  </label>\n\n  <div class=\"grid\">\n    <div>\n      <h2>With Transition Class</h2>\n      <CSSMotion\n        :visible=\"state.show\"\n        :force-render=\"state.forceRender\"\n        :motion-name=\"state.hasMotionClass ? 'transition' : null\"\n        :remove-on-leave=\"state.removeOnLeave\"\n        leaved-class=\"hidden\"\n        @appear-prepare=\"state.prepare && forceDelay\"\n        @enter-prepare=\"state.prepare && forceDelay\"\n        @appear-start=\"onCollapse\"\n        @enter-start=\"onCollapse\"\n        @leave-active=\"onCollapse\"\n        @enter-end=\"skipColorTransition\"\n        @leave-end=\"skipColorTransition\"\n        @visible-changed=\"onVisibleChanged\"\n      >\n        <template v-slot=\"props\">\n          <Div v-bind=\"props\" class=\"demo-block\" />\n        </template>\n      </CSSMotion>\n    </div>\n\n    <div>\n      <h2>With Animation Class</h2>\n\n      <CSSMotion\n        :visible=\"state.show\"\n        :force-render=\"state.forceRender\"\n        :motion-name=\"state.hasMotionClass ? 'animation' : null\"\n        :remove-on-leave=\"state.removeOnLeave\"\n        leaved-class=\"hidden\"\n        @leave-active=\"styleGreen\"\n      >\n        <template v-slot=\"props\">\n          <div v-bind=\"props\" class=\"demo-block\" />\n        </template>\n      </CSSMotion>\n    </div>\n  </div>\n\n  <div>\n    <button type=\"button\" @click=\"onMotionLeaveImmediately\">\n      motionLeaveImmediately\n    </button>\n\n    <div>\n      <CSSMotion\n        v-if=\"state.motionLeaveImmediately\"\n        :visible=\"false\"\n        :motion-name=\"state.hasMotionClass ? 'transition' : null\"\n        :remove-on-leave=\"state.removeOnLeave\"\n        leaved-class=\"hidden\"\n        motion-leave-immediately\n        @leave-active=\"onCollapse\"\n        @leave-end=\"skipColorTransition\"\n      >\n        <template v-slot=\"props\">\n          <div v-bind=\"props\" class=\"demo-block\" />\n        </template>\n      </CSSMotion>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport CSSMotion from '../src';\n\nimport { onMounted, onBeforeUnmount, defineComponent, nextTick } from 'vue';\n\ninterface DemoState {\n  show: boolean;\n  forceRender: boolean;\n  motionLeaveImmediately: boolean;\n  removeOnLeave: boolean;\n  hasMotionClass: boolean;\n  prepare: boolean;\n}\n\nconst Div = defineComponent({\n  setup() {\n    onMounted(() => {\n      console.log('DIV >>> Mounted!');\n    });\n\n    onBeforeUnmount(() => {\n      console.log('DIV >>> UnMounted!');\n    });\n  },\n\n  render() {\n    return <div {...this.$attrs} v-slots={this.$slots} />;\n  }\n});\n\nexport default defineComponent<{}, {}, { state: DemoState }>({\n  components: { CSSMotion, Div },\n\n  data() {\n    return {\n      state: {\n        show: true,\n        forceRender: false,\n        motionLeaveImmediately: false,\n        removeOnLeave: true,\n        hasMotionClass: true,\n        prepare: false\n      }\n    };\n  },\n\n  methods: {\n    onTrigger() {\n      setTimeout(() => {\n        this.state.show = !this.state.show;\n      }, 100);\n    },\n\n    onCollapse() {\n      return { height: '0px' };\n    },\n\n    skipColorTransition(_, event) {\n      // CSSMotion support multiple transition.\n      // You can return false to prevent motion end when fast transition finished.\n      return event.propertyName !== 'background-color';\n    },\n\n    styleGreen() {\n      return {\n        background: 'green'\n      };\n    },\n\n    async forceDelay(): Promise<void> {\n      return new Promise((resolve) => {\n        setTimeout(resolve, 2000);\n      });\n    },\n\n    onVisibleChanged(visible) {\n      console.log('Visible Changed:', visible);\n    },\n\n    onMotionLeaveImmediately() {\n      this.state.motionLeaveImmediately = !this.state.motionLeaveImmediately;\n    }\n  }\n});\n</script>\n\n<style lang=\"less\" src=\"./CSSMotion.less\"></style>\n","import { render } from \"./CSSMotion.vue?vue&type=template&id=a9f14344&bindings={}\"\nimport script from \"./CSSMotion.vue?vue&type=script&lang=ts\"\nexport * from \"./CSSMotion.vue?vue&type=script&lang=ts\"\n\nimport \"./CSSMotion.less?vue&type=style&index=0&lang=less\"\nscript.render = render\n\nexport default script","<template>\n  <button type=\"button\" @click=\"setVisible(true)\">visible = true</button>\n  <button type=\"button\" @click=\"setVisible(false)\">visible = false</button>\n\n  <CSSMotion\n    :visible=\"visible\"\n    motion-name=\"debug-transition\"\n    @enter-start=\"() => ({ maxHeight: 0 })\"\n    @enter-active=\"() => ({ maxHeight: '200px' })\"\n    @leave-start=\"() => ({ maxHeight: '200px' })\"\n    @leave-active=\"() => ({ maxHeight: 0 })\"\n  >\n    <template v-slot=\"{ style, ...props }\">\n      <div\n        v-bind=\"props\"\n        :style=\"{\n          width: '200px',\n          height: '200px',\n          background: 'green',\n          ...style\n        }\"\n      >\n        <div class=\"inner-block\">Hover when closing</div>\n      </div>\n    </template>\n  </CSSMotion>\n</template>\n\n<script>\nimport CSSMotion from '../src';\n\nimport { ref } from 'vue';\n\nexport default {\n  components: {\n    CSSMotion\n  },\n\n  setup() {\n    const visible = ref(true);\n\n    function setVisible(next) {\n      visible.value = next;\n    }\n\n    return {\n      visible,\n      setVisible\n    };\n  }\n};\n</script>\n\n<style lang=\"less\" src=\"./TransitionInsideDebug.less\"></style>\n","import { render } from \"./TransitionInsideDebug.vue?vue&type=template&id=4fbbee60&bindings={\\\"visible\\\":\\\"setup\\\",\\\"setVisible\\\":\\\"setup\\\"}\"\nimport script from \"./TransitionInsideDebug.vue?vue&type=script&lang=js\"\nexport * from \"./TransitionInsideDebug.vue?vue&type=script&lang=js\"\n\nimport \"./TransitionInsideDebug.less?vue&type=style&index=0&lang=less\"\nscript.render = render\n\nexport default script","<template>\n  key 3 is a different component with others.\n\n  <!-- Input field -->\n  <div>\n    <label>\n      node count\n      <input type=\"number\" :value=\"state.count\" @input=\"onCountChange\" />\n    </label>\n\n    <button type=\"button\" @click=\"onFlushMotion\">Flush Motion</button>\n  </div>\n\n  <!-- Motion State -->\n  <div>\n    <label v-for=\"key in state.count\" :key=\"key\">\n      <input\n        type=\"checkbox\"\n        :checked=\"state.checkedMap[key] !== false\"\n        @input=\"onChange(key, state.checkedMap[key] !== false)\"\n      />\n      {{ key }}\n    </label>\n  </div>\n\n  <!-- Motion List -->\n  <CSSMotionList\n    :keys=\"state.keyList\"\n    motion-name=\"transition\"\n    @appear-start=\"onCollapse\"\n    @enter-start=\"onCollapse\"\n    @leave-active=\"onCollapse\"\n    @visible-changed=\"onVisibleChanged\"\n  >\n    <template v-slot=\"{ key, background, ...props }\">\n      <div v-bind=\"props\" class=\"demo-block\" :style=\"{ background }\">\n        <span>{{ key }}</span>\n      </div>\n    </template>\n  </CSSMotionList>\n</template>\n\n<script lang=\"ts\">\nimport { CSSMotionList } from '../src';\nimport { VueKey } from '@ayase/vc-util/lib/types';\n\nimport { defineComponent } from 'vue';\n\ninterface DemoState {\n  count: number;\n  checkedMap: Record<string, boolean>;\n  keyList: VueKey[];\n}\n\nexport default defineComponent<{}, {}, { state: DemoState }>({\n  components: {\n    CSSMotionList\n  },\n\n  data() {\n    return {\n      state: {\n        count: 1,\n        checkedMap: {},\n        keyList: []\n      }\n    };\n  },\n\n  mounted() {\n    this.onFlushMotion();\n  },\n\n  methods: {\n    onCountChange({ target: { value } }) {\n      this.state.count = Number(value);\n    },\n\n    onFlushMotion() {\n      const { count, checkedMap } = this.state;\n      let keyList = [];\n\n      console.log(checkedMap);\n\n      for (let i = 0; i < count; i += 1) {\n        if (checkedMap[i] !== false) {\n          keyList.push(i);\n        }\n      }\n\n      keyList = keyList.map((key) => {\n        if (key === 3) {\n          return { key, background: 'orange' };\n        }\n\n        return key;\n      });\n\n      this.state.keyList = keyList;\n    },\n\n    // Motion\n    onCollapse() {\n      return { width: 0, margin: '0 -5px 0 0' };\n    },\n\n    onVisibleChanged(changedVisible, info) {\n      console.log('Visible Changed >>>', changedVisible, info);\n    },\n\n    onChange(key, checked) {\n      this.state.checkedMap[key] = !checked;\n    }\n  }\n});\n</script>\n\n<style lang=\"less\" src=\"./CSSMotionList.less\"></style>\n","import { render } from \"./CSSMotionList.vue?vue&type=template&id=1336754a&bindings={}\"\nimport script from \"./CSSMotionList.vue?vue&type=script&lang=ts\"\nexport * from \"./CSSMotionList.vue?vue&type=script&lang=ts\"\n\nimport \"./CSSMotionList.less?vue&type=style&index=0&lang=less\"\nscript.render = render\n\nexport default script","<template>\n  <label>\n    <input v-model=\"state.show\" type=\"checkbox\" />\n    Show Component\n  </label>\n\n  <div class=\"grid\">\n    <div>\n      <h2>With Transition Class</h2>\n\n      <CSSMotion\n        :visible=\"state.show\"\n        :motion-deadline=\"1000\"\n        motion-name=\"trigger\"\n        remove-on-leave\n        @appear-start=\"onStart\"\n        @enter-start=\"onStart\"\n        @leave-start=\"onStart\"\n        @appear-end=\"onEnd\"\n        @enter-end=\"onEnd\"\n        @leave-end=\"onEnd\"\n      >\n        <template v-slot=\"props\">\n          <div v-bind=\"props\" class=\"demo-block\" />\n        </template>\n      </CSSMotion>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport CSSMotion from '../src';\nimport { defineComponent } from 'vue';\n\ninterface DemoState {\n  show: boolean;\n}\n\nexport default defineComponent<{}, {}, { state: DemoState }>({\n  components: {\n    CSSMotion\n  },\n\n  data() {\n    return {\n      state: {\n        show: true\n      }\n    };\n  },\n\n  methods: {\n    onStart(ele: HTMLElement, event: object) {\n      console.log('start!', ele, event);\n    },\n\n    onEnd(ele: HTMLElement, event: object) {\n      console.log('end!', ele, event);\n    }\n  }\n});\n</script>\n\n<style lang=\"less\" src=\"./CSSMotion.less\"></style>\n","import { render } from \"./CSSMotionDeadline.vue?vue&type=template&id=31cac8ec&bindings={}\"\nimport script from \"./CSSMotionDeadline.vue?vue&type=script&lang=ts\"\nexport * from \"./CSSMotionDeadline.vue?vue&type=script&lang=ts\"\n\nimport \"./CSSMotion.less?vue&type=style&index=0&lang=less\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}